# Corvus Star: Project Wireframe

## ðŸ—ºï¸ Navigation
- **Structure Map**: [docs/architecture/FOLDER_MAP.qmd](docs/architecture/FOLDER_MAP.qmd)
- **Task List**: [.gemini/brain/.../task.md](task.md)

## ðŸ“‚ System Architecture

### ðŸ§  Core Engine (`src/core/`)
The decision-making brain of Corvus Star.
- **Sovereign Engine** (`sv_engine.py`):
    - `run(query)`: Main execution loop for intent resolution.
    - `_init_vector_engine()`: Loads skills and knowledge.
- **Vector Engine** (`engine/vector.py`):
    - `search(query)`: Finds best matching skill/intent.
    - `score_identity(text)`: Validates persona alignment.
- **Dispatcher** (`cstar_dispatcher.py`):
    - `run()`: Routes CLI commands dynamically to scripts or workflows.
- **HUD Interface** (`ui.py`):
    - `box_top()`, `box_row()`, `persona_log()`: ANSI-themed visual primitives.
    - `_ensure_persona()`: Automatic lazy-loading of persona configuration.
- **Annexation Protocol** (`annex.py`):
    - `HeimdallWarden.scan()`: Audits territory for standard compliance (Linscott/Torvalds).
- **The Gungnir Calculus** (`src/core/engine/gungnir/`):
    - `Invoke-GungnirSPRT.ps1`: Core Bernoulli SPRT math engine.
    - `Invoke-RavensGungnirStrike.ps1`: Orchestrator for alignment and test strikes.
    - `muninn.py`: Memory ledger and GPHS recalculation engine.
    - `GungnirSPRT.Tests.ps1`: Pester 5 validation suite for SPRT logic.
- **The Gungnir Calculus (Legacy/Global)** (`src/core/`):
    - `metrics.py`: Computes GPHS (Global Project Health Score).
    - `prompt_linter.py`: AST-based validation of .prompty files.
    - `weights.json`: The GPHS weight ledger.
    - **Atomic Cortex** (`src/core/engine/atomic_gpt.py`): Localized Transformer for code analysis.
    - **Alfred Overwatch** (`src/core/engine/alfred_observer.py`): Failure pattern guidance daemon.
- **SPRT Verification** (`tests/integration/project_fishtest.py`):
    - `GungnirSPRT`: Statistical significance testing for GPHS deltas.
- **Proxy Skills** (`.agent/skills/`):
    - `ravens.py`, `trace.py`, `heimdall.py`, etc. (Dynamic CLI Entry Points).

### ðŸ¦… The Ravens (`src/sentinel/`)
The autonomous daemon ensuring system health.
- **Bootstrap** (`_bootstrap.py`): Shared environment and Pathlib configuration.
- **Code Sanitizer: Bifrost Gate** (`code_sanitizer.py`):
    - `sanitize_code()`: Auto-repairs indentation, syntax, and markdown fences.
    - `repair_imports()`: Stubs fabricated imports with MagicMocks.
- **Huginn & Muninn** (`main_loop.py`):
    - `daemon_loop()`: Orchestrates the twin ravens (Thought/Memory).
- **Muninn: The Improver** (`src/sentinel/muninn.py`):
    - `run()`: Executes the self-improvement protocol.
    - `Wardens`: specialized improvement strategists (Valkyrie, Mimir, Heimdall, etc.).
    - `NornWarden`: Executes the Campaign Implementation Plan (N1000).

### ðŸ“‚ Test Infrastructure (`tests/`)
Verification and hardening tools.
- **Ravens Harness** (`ravens_harness.py`): 100-iteration synthetic/mock gauntlet tester.
- **Empire Test Suite** (`tests/empire_tests/`): 40+ companion tests for core/extension tools (Linscott Standard).
- **Response Harvester** (`src/sentinel/harvest_responses.py`): Records live AI data for offline harness.

### ðŸ› ï¸ Tools (`src/tools/`)
Specialized utilities for analysis and repair.
- **Heimdall: The Guardian** (`code_sentinel.py`):
    - `scan(path)`: Static analysis for syntax and security.

### ðŸ§  Synapse (`src/synapse/`)
Connection to the wider network (Knowledge Core).
- **Synapse Sync** (`synapse_sync.py`):
    - `push()`: Uploads local skills to global brain.
    - `pull()`: Updates local cache from global brain.

## ðŸ“ Key Workflows

### 1. Intent Resolution
`User Input` -> `cstar_dispatcher` -> `sv_engine` -> `vector.py` -> `Skill Execution`

### 2. Autonomous Audit
`Time Trigger` -> `Huginn & Muninn` -> `muninn.py` -> `Heimdall` -> `Report`

### 3. Skill Development
`User Create` -> `.agent/skills/NEW_SKILL.py` -> `c* NEW_SKILL` -> `Available`
